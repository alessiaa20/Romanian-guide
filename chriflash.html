<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Romanian Vocabulary â€” Flashcards & Matching Game</title>
  <style>
    :root{
      --bg:#1e1e2f;
      --card:#2a2a3d;
      --accent:#a78bfa;
      --muted:#cbd5e1;
      --glass:rgba(255,255,255,0.05);
      --btn-back:#4ade80;
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial}
    body{margin:0;background:linear-gradient(180deg,#1e1e2f 0%,#2a2a3d 60%);color:#f1f5f9;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
    .app{width:100%;max-width:1100px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    p.lead{margin:4px 0 0;color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:18px}
    .panel{background:var(--card);border-radius:14px;padding:18px;box-shadow:0 6px 24px rgba(0,0,0,0.6)}

    /* Flashcard area */
    .flashcard-area{display:flex;flex-direction:column;gap:12px}
    .card{height:200px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.04),var(--glass));display:flex;align-items:center;justify-content:center;flex-direction:column;padding:16px;cursor:pointer;transition:transform .35s,box-shadow .25s;backface-visibility:hidden}
    .card.flipped{transform:rotateY(180deg)}
    .term{font-size:36px;letter-spacing:.6px}
    .definition{font-size:20px;color:var(--muted)}
    .controls{display:flex;gap:8px;align-items:center}

    .sidebar{display:flex;flex-direction:column;gap:14px}
    .list{max-height:320px;overflow:auto;padding:8px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent)}
    .list-item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;gap:8px;cursor:pointer}
    .list-item:hover{background:rgba(255,255,255,0.06)}
    .badge{background:rgba(255,255,255,0.08);padding:6px 8px;border-radius:8px}

    .games{display:flex;flex-direction:column;gap:8px}
    button{background:transparent;border:1px solid rgba(255,255,255,0.1);padding:8px 12px;border-radius:10px;color:inherit;cursor:pointer}
    button.primary{background:linear-gradient(90deg,var(--accent),#c4b5fd);border:none;color:#1e1e2f;font-weight:600}
    button.goback{background:linear-gradient(90deg,var(--btn-back),#86efac);border:none;color:#1e1e2f;font-weight:600}

    .match-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    .tile{padding:12px;border-radius:8px;background:rgba(255,255,255,0.06);text-align:center;cursor:pointer;user-select:none}

    footer{margin-top:12px;color:var(--muted);font-size:13px}

    @media(max-width:900px){.grid{grid-template-columns:1fr}.sidebar{order:2}}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Romanian Vocabulary â€” Flashcards</h1>
        <p class="lead">Interactive flashcards, matching game, spaced review, pronunciation.</p>
      </div>
      <div>
        <button id="speakBtn" title="Pronounce current word">ðŸ”Š Pronounce</button>
        <a href="flashcards.html"><button class="goback">â¬… Go Back</button></a>
      </div>
    </header>

    <main class="grid">
      <section class="panel">
        <div class="flashcard-area">
          <div id="flashcard" class="card" tabindex="0" aria-live="polite">
            <div id="term" class="term"></div>
            <div id="def" class="definition"></div>
          </div>

          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
            <div class="controls">
              <button id="prevBtn">â—€ Prev</button>
              <button id="nextBtn">Next â–¶</button>
              <button id="flipBtn">Flip</button>
              <button id="againBtn">Mark: Again</button>
              <button id="goodBtn">Mark: Good</button>
            </div>
            <div style="text-align:right">
              <div id="progress"></div>
              <div id="score" style="color:var(--muted)"></div>
            </div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
            <label style="color:var(--muted);font-size:13px">Study mode:</label>
            <select id="mode">
              <option value="flash">Flashcards (default)</option>
              <option value="typing">Typing recall</option>
            </select>
            <label style="color:var(--muted);font-size:13px">Auto-speak</label>
            <input id="autospeak" type="checkbox" />
          </div>

          <div id="typingArea" style="display:none;margin-top:10px">
            <input id="typingInput" placeholder="Type the English meaning..." style="width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:transparent;color:inherit" />
            <div style="margin-top:6px"><button id="checkBtn" class="primary">Check answer</button></div>
          </div>

        </div>

        <div style="margin-top:18px">
          <h3 style="margin:0 0 8px 0">Match game â€” drag the pairs</h3>
          <div id="matchArea" class="match-grid"></div>
          <div style="margin-top:8px"><button id="startMatch">Start match</button></div>
        </div>

        <footer>
          Tip: Click the card to flip. Use "Mark: Good" when confident.
        </footer>
      </section>

      <aside class="sidebar panel">
        <div>
          <h3 style="margin:0 0 8px 0">Vocabulary list</h3>
          <div class="list" id="vocabList"></div>
        </div>

        <div>
          <h3 style="margin:0 0 8px 0">Controls & Progress</h3>
          <div style="display:flex;gap:8px">
            <button id="shuffle">Shuffle</button>
            <button id="reset">Reset</button>
          </div>
        </div>

        <div>
          <h3 style="margin:0 0 8px 0">Quick practice</h3>
          <div class="games">
            <button id="listenAll">Listen all</button>
            <button id="showAll">Show all answers</button>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <script>
    const vocab = [
      ["Dumnezeu","God"],["Isus","Jesus"],["Duhul SfÃ¢nt","Holy Spirit"],["RÄƒscumpÄƒrare","Redemption"],["Dreptate","Righteousness"],["CredinÈ›Äƒ","Faith"],
      ["PÄƒcat","Sin"],["MÃ¢ntuire","Salvation"],["Har","Grace"],["RugÄƒciune","Prayer"],["Biblie","Bible"],["BisericÄƒ","Church"],
      ["PÄƒrtÄƒÈ™ie","Fellowship"],["ÃŽnchinare","Worship"],["Ucenic","Disciple"],["Botez","Baptism"],["ÃŽnviere","Resurrection"],["Rai","Heaven"],
      ["Iad","Hell"],["Evanghelizare","Evangelism"],["PoruncÄƒ","Commandment"],["LegÄƒmÃ¢nt","Covenant"],["PocÄƒinÈ›Äƒ","Repentance"],["MilÄƒ","Mercy"],
      ["A duce","To take / to bring"],["Lipsa","Lack"],["Pastorul","The shepherd"],["PaÈ™te","Easter / grazing"],["PÄƒÈ™uni","Pastures"],
      ["Verzi","Green"],["Odihna","Rest"],["Ape","Waters"],["ÃŽnvioreazÄƒ","Refreshing"],["Sufletul","The soul"],["PovÄƒÈ›uieÈ™te","Advises"],
      ["CÄƒrÄƒri","Paths"],["PricinÄƒ","Reason"],["Umblu","I walk"],["Prin","Through"],["Valea","The valley"],["Umbrei","Shadow"],
      ["MorÈ›ii","Death"],["Tem","I am afraid"],["Niciun","None"],["CÄƒci","Though"],["ÃŽntinzi","You stretch"],["Potrivnicilor","Adversaries"],
      ["Ungi","You anoint"],["Capul","Head"],["Untdelemn","Oil"],["Plin","Full"],["ÃŽndurarea","Mercy"],["ÃŽnsoÈ›i","Accompany"],
      ["Unt","Butter"],["De","Of"],["Lemn","Wood"],["Toiagul","Staff"],["Nuiaua","Rod"],["MÃ¢ngÃ¢ie","Caress"],["Ta","Yours"]
    ];

    let order = [...Array(vocab.length).keys()];
    let index = 0;
    let mastered = new Set(JSON.parse(localStorage.getItem('mastered')||'[]'));

    const termEl = document.getElementById('term');
    const defEl = document.getElementById('def');
    const flashcard = document.getElementById('flashcard');
    const progress = document.getElementById('progress');
    const score = document.getElementById('score');
    const vocabList = document.getElementById('vocabList');

    function renderCard(){
      const i = order[index];
      termEl.textContent = vocab[i][0];
      defEl.textContent = vocab[i][1];
      progress.textContent = (index+1) + ' / ' + vocab.length;
      score.textContent = 'Mastered: ' + mastered.size;
      updateListHighlight();
      if(document.getElementById('autospeak').checked) speak(vocab[i][0]);
    }

    function updateListHighlight(){
      Array.from(vocabList.children).forEach((el,k)=>{
        el.style.opacity = (order[index]===k?1:0.55);
        el.querySelector('.badge').textContent = mastered.has(k)?'âœ“':'';
      });
    }

    function speak(text){
      if(!('speechSynthesis' in window)) return;
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'ro-RO'; u.rate = 0.95; u.pitch = 1;
      speechSynthesis.cancel(); speechSynthesis.speak(u);
    }

    function buildList(){
      vocabList.innerHTML='';
      vocab.forEach((v,i)=>{
        const el = document.createElement('div'); 
        el.className='list-item';
        el.innerHTML = `<div>${v[0]} <small style="color:var(--muted)">â€” ${v[1]}</small></div><div class="badge">${mastered.has(i)?'âœ“':''}</div>`;
        el.onclick = ()=>{index = order.indexOf(i); renderCard();};
        vocabList.appendChild(el);
      });
    }

    document.getElementById('nextBtn').onclick = ()=>{ index=(index+1)%order.length; renderCard(); }
    document.getElementById('prevBtn').onclick = ()=>{ index=(index-1+order.length)%order.length; renderCard(); }
    document.getElementById('flipBtn').onclick = ()=>{ flashcard.classList.toggle('flipped'); }
    document.getElementById('speakBtn').onclick = ()=>{ speak(vocab[order[index]][0]); }
    document.getElementById('againBtn').onclick = ()=>{ mastered.delete(order[index]); saveMastered(); renderCard(); }
    document.getElementById('goodBtn').onclick = ()=>{ mastered.add(order[index]); saveMastered(); renderCard(); }

    document.getElementById('shuffle').onclick = ()=>{ shuffleOrder(); renderCard(); }
    document.getElementById('reset').onclick = ()=>{ if(confirm('Reset progress?')){ mastered = new Set(); saveMastered(); renderCard(); buildList(); }}

    document.getElementById('mode').onchange = (e)=>{
      document.getElementById('typingArea').style.display = e.target.value==='typing'?'block':'none';
    }

    document.getElementById('checkBtn').onclick = ()=>{
      const answer = document.getElementById('typingInput').value.trim().toLowerCase();
      const correct = vocab[order[index]][1].toLowerCase();
      if(answer===correct){ 
        alert('Correct!'); 
        mastered.add(order[index]); 
        saveMastered(); 
        document.getElementById('typingInput').value=''; 
        index=(index+1)%order.length; 
        renderCard(); 
      } else { alert('Not quite â€” correct: ' + correct); }
    }

    function saveMastered(){ localStorage.setItem('mastered',JSON.stringify(Array.from(mastered))); }
    function shuffleOrder(){ order = order.sort(()=>Math.random()-0.5); index=0; }

    // Match game
    document.getElementById('startMatch').onclick = ()=>{
      const area = document.getElementById('matchArea'); 
      area.innerHTML='';
      const left = vocab.map((v,i)=>({t:v[0],i}));
      const right = vocab.map((v,i)=>({t:v[1],i}));
      const items = shuffleArray(left.concat(right));
      items.forEach(item=>{
        const t = document.createElement('div'); 
        t.className='tile'; 
        t.textContent = item.t; 
        t.dataset.idx = item.i; 
        t.dataset.side = left.find(x=>x.t===item.t)?'ro':'en';
        t.onclick = ()=>tileClick(t);
        area.appendChild(t);
      });
    }

    let firstTile = null;
    function tileClick(el){
      if(!firstTile){ firstTile = el; el.style.opacity = 0.6; }
      else{
        if(firstTile===el) return;
        if(firstTile.dataset.idx===el.dataset.idx && firstTile.dataset.side!==el.dataset.side){
          firstTile.style.background='linear-gradient(90deg,var(--accent),#c4b5fd)';
          el.style.background='linear-gradient(90deg,var(--accent),#c4b5fd)';
          firstTile.onclick = el.onclick = null;
        } else { alert('Not a match. Try again.'); }
        firstTile.style.opacity = 1; firstTile = null;
      }
    }

    function shuffleArray(a){ return a.map(v=>[Math.random(),v]).sort((x,y)=>x[0]-y[0]).map(x=>x[1]); }

    document.getElementById('listenAll').onclick = ()=>{
      (async ()=>{
        for(let i=0;i<vocab.length;i++){ speak(vocab[i][0]); await new Promise(r=>setTimeout(r,600)); }
      })();
    }

    document.getElementById('showAll').onclick = ()=>{ alert(vocab.map(v=>v[0]+" â€” "+v[1]).join('\n')); }

    buildList();
    renderCard();

    document.addEventListener('keydown', (e)=>{
      if(e.key==='ArrowRight') document.getElementById('nextBtn').click();
      if(e.key==='ArrowLeft') document.getElementById('prevBtn').click();
      if(e.key===' ') document.getElementById('flipBtn').click();
    });

    const savedOrder = JSON.parse(localStorage.getItem('order')||'null');
    if(savedOrder && savedOrder.length===vocab.length) order = savedOrder;
    window.addEventListener('beforeunload', ()=>{ localStorage.setItem('order', JSON.stringify(order)); });
  </script>
</body>
</html>

